<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MCP7940: Arduino Library Header for the MCP7940M and MCP7940N Real-Time Clock devices</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MCP7940
   &#160;<span id="projectnumber">v1.2.0</span>
   </div>
   <div id="projectbrief">Arduino Library for the MCP7940N and MCP7940M Real-time clocks</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Arduino Library Header for the MCP7940M and MCP7940N Real-Time Clock devices </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="MCP7940_intro_section"></a>
Description</h1>
<p>Class definition header for the MCP7940 from Microchip. Both the MCP7940N (with battery backup pin and the MCP7940M are supported with this library and they both use the same I2C address. This chip is a Real-Time-Clock with an I2C interface. The data sheet located at <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/20002292B.pdf">http://ww1.microchip.com/downloads/en/DeviceDoc/20002292B.pdf</a> describes the functionality used in this library.<br />
se is made of portions of Adafruit's RTClib Version 1.2.0 at <a href="https://github.com/adafruit/RTClib">https://github.com/adafruit/RTClib</a> which is a fork of the original RTClib from Jeelabs. The re-used code encompasses only the classes for time and date.<br />
 </p>
<h1><a class="anchor" id="doxygen"></a>
configuration</h1>
<p>This library is built with the standard "Doxyfile", which is located at <a href="https://github.com/Zanduino/Common/blob/main/Doxygen">https://github.com/Zanduino/Common/blob/main/Doxygen</a>. As described on that page, there are only 5 environment variables used, and these are set in the project's actions file, located at <a href="https://github.com/Zanduino/MCP7940/blob/master/.github/workflows/ci-doxygen.yml">https://github.com/Zanduino/MCP7940/blob/master/.github/workflows/ci-doxygen.yml</a> Edit this file and set the 5 variables: PRETTYNAME, PROJECT_NAME, PROJECT_NUMBER, PROJECT_BRIEF and PROJECT_LOGO so that these values are used in the doxygen documentation. The local copy of the doxyfile should be in the project's root directory in order to do local doxygen testing, but the file is ignored on upload to GitHub.</p>
<h1><a class="anchor" id="clang-format"></a>
clang-format</h1>
<p>Part of the GitHub actions for CI is running every source file through "clang-format" to ensure that coding formatting is done the same for all files. The configuration file ".clang-format" is located at <a href="https://github.com/Zanduino/Common/tree/main/clang-format">https://github.com/Zanduino/Common/tree/main/clang-format</a> and this is used for CI tests when pushing to GitHub. The local file, if present in the root directory, is ignored when committing and uploading.</p>
<h1><a class="anchor" id="license"></a>
GNU General Public License v3.0</h1>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<h1><a class="anchor" id="author"></a>
Author</h1>
<p>Written by Arnd <a href="#" onclick="location.href='mai'+'lto:'+'Arn'+'d@'+'Zan'+'du'+'ino'+'.C'+'om'; return false;">Arnd@<span style="display: none;">.nosp@m.</span>Zand<span style="display: none;">.nosp@m.</span>uino.<span style="display: none;">.nosp@m.</span>Com</a> at <a href="https://www.github.com/SV-Zanshin">https://www.github.com/SV-Zanshin</a></p>
<h1><a class="anchor" id="versions"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Date </th><th>Developer </th><th>Comments  </th></tr>
<tr>
<td>1.2.1 </td><td>2021-05-23 </td><td>SV-Zanshin </td><td>Issue #60 - Correct handling of dates &lt; 2000-01-01 </td></tr>
<tr>
<td>1.2.1 </td><td>2021-01-06 </td><td>SV-Zanshin </td><td>Issue #58 - Corrected return reference values in readRAM and readEUI and added writeEUI </td></tr>
<tr>
<td>1.2.1 </td><td>2021-01-05 </td><td>masterx1981 </td><td>Issue #58 - Add support for MCP79401 and MCP79402 read EUI data </td></tr>
<tr>
<td>1.1.9 </td><td>2020-11-26 </td><td>SV-Zanshin </td><td>Issue #54 - Optimize c++ code / resilience. Uniform Initialization. Consolidated I2C calls. </td></tr>
<tr>
<td>1.1.8 </td><td>2020-11-15 </td><td>SV-Zanshin </td><td>Issue #50 - Reformat with "clang-format" </td></tr>
<tr>
<td>1.1.8 </td><td>2020-11-14 </td><td>SV-Zanshin </td><td>Issue #49 - corrections for Battery Backup mode </td></tr>
<tr>
<td>1.1.7 </td><td>2020-05-18 </td><td>wvmarle </td><td>Issue #47 - adjust() method with compiler variables fix </td></tr>
<tr>
<td>1.1.7 </td><td>2019-02-07 </td><td>davidlehrian </td><td>Issue #43 - Calib. may cause overflow of "trim" variable </td></tr>
<tr>
<td>1.1.7 </td><td>2019-02-07 </td><td>davidlehrian </td><td>Issue #42 - calibrate(DateTime) to correct current dt/tm </td></tr>
<tr>
<td>1.1.6 </td><td>2019-01-27 </td><td>davidlehrian </td><td>Issue #36 - Reopened, changed statements to avoid warn. </td></tr>
<tr>
<td>1.1.5 </td><td>2019-01-19 </td><td>SV-Zanshin </td><td>Issue #40 - Change structure and layout to use doxygen </td></tr>
<tr>
<td>1.1.5 </td><td>2019-01-19 </td><td>INemesisI </td><td>Issue #37 - AlarmPolarity bit clearing on setAlarm() </td></tr>
<tr>
<td>1.1.5 </td><td>2019-01-19 </td><td>SV-Zanshin </td><td>Issue #39 - Changes to avoid Travis-CI warnings </td></tr>
<tr>
<td>1.1.5 </td><td>2019-01-18 </td><td>INemesisI </td><td>Issue #38 - Overflow on setting new TRIM value </td></tr>
<tr>
<td>1.1.4 </td><td>2018-12-15 </td><td>hexeguitar </td><td>Issue #36 - Overflow on I2C_MODES datatype corrected </td></tr>
<tr>
<td>1.1.4 </td><td>2018-12-15 </td><td>huynh213 </td><td>Issue #35 - MCP7940.adjust() resets the PWRFAIL/VBATEN </td></tr>
<tr>
<td>1.1.3 </td><td>2018-08-08 </td><td>amgrays </td><td>Issue #32 - invalid return on SetMFP corrected </td></tr>
<tr>
<td>1.1.3 </td><td>2018-08-05 </td><td>HannesJo0139 </td><td>Issue #31 - Calibration trim on negative numbers </td></tr>
<tr>
<td>1.1.2 </td><td>2018-08-04 </td><td>SV-Zanshin </td><td>Issue #28 - added calibrate() ovld for freq. calibration </td></tr>
<tr>
<td>1.1.2 </td><td>2018-07-08 </td><td>logicaprogrammabile </td><td>Issue #26 - regarding hour bitmasks </td></tr>
<tr>
<td>1.1.1 </td><td>2018-07-07 </td><td>SV-Zanshin </td><td>Fixed bugs introduced by 14, 20, and 21 </td></tr>
<tr>
<td>1.1.1 </td><td>2018-07-07 </td><td>wvmarle </td><td>Pull #21 - Additional changes </td></tr>
<tr>
<td>1.1.1 </td><td>2018-07-06 </td><td>wvmarle </td><td>Pull #20 - Numerous changes and enhancements </td></tr>
<tr>
<td>1.1.0 </td><td>2018-07-05 </td><td>wvmarle </td><td>Pull #14 - bug fixes to alarm state and comment cleanup </td></tr>
<tr>
<td>1.0.8 </td><td>2018-07-02 </td><td>SV-Zanshin </td><td>Added guard code for multiple I2C constant definitions </td></tr>
<tr>
<td>1.0.8 </td><td>2018-06-30 </td><td>SV-Zanshin </td><td>Issue #15 - Added I2C Speed selection </td></tr>
<tr>
<td>1.0.7 </td><td>2018-06-21 </td><td>SV-Zanshin </td><td>Issue #13 - <a class="el" href="class_date_time.html#a958229f0d6a46d092658028d25a9e65c">DateTime.dayOfTheWeek()</a> is 0-6 instead 1-7 </td></tr>
<tr>
<td>1.0.6 </td><td>2018-04-29 </td><td>SV-Zanshin </td><td>Issue #7 - Moved param defaults to prototypes </td></tr>
<tr>
<td>1.0.6 </td><td>2018-04-29 </td><td>SV-Zanshin </td><td>Issue #10 - Setting of alarm with WKDAY to future date </td></tr>
<tr>
<td>1.0.5b </td><td>2017-12-18 </td><td>SV-Zanshin </td><td>Issue #8 - Setting to 24-Hour clock </td></tr>
<tr>
<td>1.0.5a </td><td>2017-10-31 </td><td>SV-Zanshin </td><td>Issue #6 - Remove classification on template functions </td></tr>
<tr>
<td>1.0.4c </td><td>2017-08-13 </td><td>SV-Zanshin </td><td>Issue #5 - Remove checks after Wire.requestFrom() </td></tr>
<tr>
<td>1.0.4b </td><td>2017-08-08 </td><td>SV-Zanshin </td><td>Replaced readRAM and writeRAM with template functions </td></tr>
<tr>
<td>1.0.4a </td><td>2017-08-06 </td><td>SV-Zanshin </td><td>Removed unnecessary MCP7940_I2C_Delay and all references </td></tr>
<tr>
<td>1.0.3 </td><td>2017-08-05 </td><td>SV-Zanshin </td><td>Added calls for MCP7940N. getPowerFail(),clearPowerFail(), setBattery(). Added I2C_READ_ATTEMPTS to prevent I2C hang, added getPowerUp/Down() </td></tr>
<tr>
<td>1.0.3a </td><td>2017-07-29 </td><td>SV-Zanshin </td><td>Cleaned up comments, no code changes </td></tr>
<tr>
<td>1.0.3 </td><td>2017-07-29 </td><td>SV-Zanshin </td><td>getSQWSpeed(),setSQWSpeed(),setSQWState(),getSQWState() </td></tr>
<tr>
<td>1.0.2 </td><td>2017-07-29 </td><td>SV-Zanshin </td><td>getAlarm(),setAlarmState(),getAlarmState(),isAlarm()added optional setting setAlarm(). Fixed alarm 1 index </td></tr>
<tr>
<td>1.0.1 </td><td>2017-07-25 </td><td>SV-Zanshin </td><td>Overloaded Calibrate() to manually set trim factor </td></tr>
<tr>
<td>1.0.0 </td><td>2017-07-23 </td><td>SV-Zanshin </td><td>Cleaned up code, initial github upload </td></tr>
<tr>
<td>1.0.2b </td><td>2017-07-20 </td><td>SV-Zanshin </td><td>Added alarm handling </td></tr>
<tr>
<td>1.0.1b </td><td>2017-07-19 </td><td>SV-Zanshin </td><td>Added methods </td></tr>
<tr>
<td>1.0.0b </td><td>2017-07-17 </td><td>SV-Zanshin </td><td>Initial coding </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
